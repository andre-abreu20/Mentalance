<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
  lang="pt-BR"
  th:fragment="layout (title, content)"
>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title th:if="${title == null}">Mentalance</title>
    <title th:if="${title != null}" th:replace="${title}">Mentalance</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      integrity="sha384-QWTKZyjpPEjIS+7DtL7xvZc9RWG8e1U5rO1qzE1mB1Jc7x0lKj7rGqH0Q5Pc5d5R"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <header class="navbar">
      <div class="navbar__brand">
        <a th:href="@{/}" th:text="#{app.brand}">Mentalance</a>
      </div>
      <nav class="navbar__menu">
        <div sec:authorize="isAuthenticated()">
          <a th:href="@{/dashboard}" th:text="#{nav.dashboard}">Dashboard</a>
          <a th:href="@{/checkins}" th:text="#{nav.checkins}">Check-ins</a>
          <a th:href="@{/checkins/novo}" th:text="#{nav.newCheckin}"
            >Novo Check-in</a
          >
          <a th:href="@{/relatorio}" th:text="#{nav.reports}">Relatórios</a>
          <a
            sec:authorize="hasRole('ADMIN')"
            th:href="@{/admin}"
            th:text="#{nav.admin}"
            >Admin</a
          >
          <span class="navbar__user" sec:authentication="name">Usuário</span>
          <form th:action="@{/logout}" method="post" class="navbar__logout">
            <input
              type="hidden"
              th:name="${_csrf.parameterName}"
              th:value="${_csrf.token}"
            />
            <button type="submit" th:text="#{nav.logout}">Sair</button>
          </form>
        </div>
        <div sec:authorize="isAnonymous()">
          <a th:href="@{/login}" th:text="#{nav.login}">Login</a>
          <a th:href="@{/register}" th:text="#{nav.register}">Registrar</a>
        </div>
      </nav>
      <div class="navbar__lang">
        <a th:href="@{?lang=pt_BR}">PT</a> |
        <a th:href="@{?lang=en_US}">EN</a>
      </div>
    </header>

    <main
      th:insert="${content}"
      th:class="${useContainer != null && useContainer == false ? 'container-fluid' : 'container'}"
    ></main>

    <footer class="footer">
      <p>
        &copy;
        <span th:text="${#calendars.year(#calendars.createNow())}">2025</span>
        Mentalance
      </p>
    </footer>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
