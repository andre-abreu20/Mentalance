spring.application.name=Mentalance
server.port=8080

# Datasource (H2 default, override via profile for Oracle)
spring.datasource.url=jdbc:h2:mem:mentalance;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driverClassName=org.h2.Driver

spring.jpa.open-in-view=false
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.show-sql=false

# H2 console
spring.h2.console.enabled=true
spring.h2.console.path=/h2

# Internationalization
spring.messages.basename=i18n/messages
spring.thymeleaf.cache=false

# Error handling - throw exception for 404 (only for controllers, not static resources)
spring.mvc.throw-exception-if-no-handler-found=true

# Security
spring.security.user.name=admin
spring.security.user.password=admin123
spring.security.user.roles=ADMIN

# Logging
logging.level.org.springframework.security=INFO

# OpenAI - OPCIONAL
# Para habilitar OpenAI, configure a variável de ambiente OPENAI_API_KEY no Azure
# E defina openai.enabled=true nas variáveis de ambiente do Azure
# Se OPENAI_API_KEY não estiver definida ou openai.enabled=false, o MockIAFeedbackService será usado automaticamente
openai.api-key=${OPENAI_API_KEY:}
openai.enabled=${OPENAI_ENABLED:true}
openai.model=gpt-4o-mini

# RabbitMQ (CloudAMQP ou local) - OPCIONAL
# Para habilitar RabbitMQ, configure as variáveis de ambiente:
# RABBITMQ_HOST, RABBITMQ_PORT, RABBITMQ_USERNAME, RABBITMQ_PASSWORD, RABBITMQ_VHOSTrabbit.enabled=false
rabbit.enabled=false
# Se as variáveis não estiverem definidas, o RabbitMQ será desabilitado automaticamente
spring.rabbitmq.host=${RABBITMQ_HOST:disabled}
spring.rabbitmq.port=${RABBITMQ_PORT:0}
spring.rabbitmq.username=${RABBITMQ_USERNAME:}
spring.rabbitmq.password=${RABBITMQ_PASSWORD:}
# Virtual host: no CloudAMQP geralmente é o mesmo que o username (ex: /duiymrjp ou duiymrjp)
spring.rabbitmq.virtual-host=${RABBITMQ_VHOST:}
# Configuração opcional para SSL (CloudAMQP geralmente usa SSL)
spring.rabbitmq.ssl.enabled=${RABBITMQ_SSL_ENABLED:false}
# Desabilitar listener por padrão (habilite apenas quando a conexão estiver funcionando)
spring.rabbitmq.listener.simple.auto-startup=${RABBITMQ_AUTO_START:false}
spring.rabbitmq.listener.simple.missing-queues-fatal=false
# Permitir que a aplicação inicie mesmo se o RabbitMQ não estiver disponível
spring.rabbitmq.listener.simple.retry.enabled=false
# Não falhar na inicialização se houver erro de conexão
spring.rabbitmq.listener.simple.default-requeue-rejected=false

spring.rabbitmq.ssl.algorithm=TLSv1.2

# Cache Configuration (Caffeine)
spring.cache.type=caffeine
spring.cache.cache-names=checkinsRecentes,resumoSemanal,analisesIa,estatisticasGlobais
spring.cache.caffeine.spec=maximumSize=500,expireAfterWrite=10m